# logical-puzzles

논리 퍼즐 평가 데이터셋 및 LLM 평가 파이프라인

## 퍼즐 유형

### 1. Cryptarithmetic (복면산)
각 문자가 고유한 숫자(0-9)를 나타내는 덧셈 퍼즐. 문자를 숫자로 치환하여 등식을 만족시키는 매핑을 찾는 문제.

**예시:**
```
  SEND
+ MORE
------
= MONEY
```
→ 정답: MONEY = 10652 (S=9, E=5, N=6, D=7, M=1, O=0, R=8, Y=2)

**특징:**
- **역방향 생성**: 유효한 산술식에서 시작하여 문자로 매핑
- **유일해 보장**: 순열 탐색으로 정확히 하나의 해를 가지는 퍼즐만 생성
- **난이도 분류**: 고유 문자 수 기반 (Easy: 3-4, Medium: 5-6, Hard: 6-8, Expert: 8-10)
- **제약 조건**: 다중 자릿수의 첫 문자는 0이 될 수 없음

### 2. Inequality (부등호 퍼즐)
1부터 N까지의 숫자를 부등호 관계를 만족하도록 배열하는 문제. 일부 숫자가 힌트로 주어짐.

**예시:**
```
3 > _ < 2 > _
```
→ 정답: 3142 (3 > 1 < 2 > ... 이런 식으로 해석하지 않고, 위치별로 3, 1, 4, 2)

**특징:**
- **순열 기반 생성**: 1~N 순열에서 부등호 관계 도출
- **유일해 보장**: 모든 N! 순열 검증으로 유일성 확인
- **난이도 분류**: 크기(3-7)와 힌트 비율(50%→20%) 기반
- **전략적 힌트 선택**: 첫/끝 위치 앵커링으로 추론 유도

### 3. Number Baseball (숫자 야구)
서로 다른 숫자로 이루어진 N자리 비밀번호를 힌트(Strike/Ball)를 통해 추론하는 게임.

**예시:**
```
Hints:
  123: 0S 1B
  456: 1S 0B
  789: 0S 2B
```
→ 정답: 497 (Strike=자리와 숫자 일치, Ball=숫자만 일치)

**특징:**
- **힌트 정제 알고리즘**: 다중 해가 있을 경우 최적 힌트 추가
- **유일해 보장**: P(10,N) 순열 전체 검증
- **난이도 분류**: 자릿수(3-4)와 힌트 전략(직접→간접) 기반
- **검증 시스템**: 모든 생성 문제의 유일성 검증

### 4. Ferryman (뱃사공)
뱃사공의 물품 운송 문제로, 다양한 운항 규정과 제약 조건을 고려하여 총 소요 시간을 계산하는 문제.

**특징:**
- 속도 제한 구역 (A구역, B구역)
- 화물 무게에 따른 속도 감소
- 의무 휴식 시간
- 복잡한 조건 추론 필요

### 5. Yacht Dice (요트 다이스)
12개의 주사위 결과를 12개의 카테고리에 최적으로 할당하여 총점을 최대화하는 조합 최적화 문제.

**특징:**
- **최적화 문제**: 12! = 479,001,600 가지의 가능한 할당
- **헝가리안 알고리즘**: O(n³) 복잡도로 최적해 계산
- **보너스 계산**: 상단 섹션 합계 ≥ 63점 시 35점 보너스
- **다양한 룰 변경 지원**: 보너스, 점수, 최적화 목표(최대/최소) 설정 가능

### 6. Sudoku (스도쿠)
9×9 스도쿠 퍼즐 생성 및 난이도별 평가 데이터셋.

**특징:**
- **유일해 보장**: 모든 퍼즐이 정확히 하나의 해를 가짐
- **난이도 평가**: Easy, Medium, Hard, Expert, Extreme 자동 분류
- **Spot-check 평가**: HMAC 기반 K-셀 선택으로 LLM 평가 지원
- **대칭 지원**: 회전/반사 대칭으로 미적 품질 향상
- **재현 가능**: 시드 고정으로 동일한 퍼즐 재생성

### 7. Minesweeper (지뢰찾기)
제약 충족 문제(CSP)로 설계된 지뢰찾기 퍼즐 - LLM의 논리적 추론 능력 평가.

**특징:**
- **유일해 보장**: 백트래킹 솔버로 유일해 검증
- **최소 힌트**: 유일해를 유지하면서 힌트 최소화
- **다양한 난이도**: Easy (6×6), Medium (8×8), Hard (10×10)
- **좌표 기반 평가**: 지뢰 위치를 (r,c) 형식으로 출력
- **부분 점수**: Exact Match, Precision, Recall, F1 Score

### 8. Array Formula (배열 수식 퍼즐)
엑셀/스프레드시트의 배열 수식과 조건부 함수를 활용한 LLM 논리 추론 평가 문제.

**예시:**
```
[제품 테이블]
| id | 제품명 | 카테고리 | 단가 | 재고 |
|----|--------|----------|------|------|
| 1  | 사과   | 과일     | 1500 | 100  |
| 2  | 우유   | 유제품   | 2500 | 50   |

질문: '과일' 카테고리의 총 재고 가치(단가×재고)는?
```
→ 정답: 150000

**특징:**
- **4가지 유형**: Lookup Query, Conditional Aggregation, Array Computation, Multi-Condition
- **실용적 문제**: 실제 비즈니스 데이터 분석 패턴 반영
- **난이도 분류**: 테이블 크기, 조건 수, 테이블 수 기반 (Easy/Medium/Hard)
- **자동 평가**: 숫자/텍스트 정답으로 자동 평가 가능

### 9. Tower of Hanoi (하노이 탑)
하노이 탑 퍼즐의 최적 해법에 대한 논리적 추론 문제.

**예시:**
```
3개의 디스크가 있는 하노이 탑 퍼즐에서,
모든 디스크를 Peg 1에서 Peg 3으로 옮기는 최소 이동 횟수는?
```
→ 정답: 7 (2^n - 1)

**특징:**
- **규칙 기반 생성**: 모든 수학/논리 계산은 순수 규칙 기반
- **다양한 문제 유형**: 최소 이동 횟수, K번째 이동 디스크, 특정 단계 상태 추론
- **난이도 분류**: 디스크 수(3-7)와 질문 유형 기반
- **검증 가능**: 시뮬레이션으로 정답 검증

### 10. Causal DAG (인과관계 그래프)
시간 지연을 포함한 인과관계 그래프에서 사건 전파 시간을 추론하는 문제.

**예시:**
```
Events:
  E1: PowerOutage (정전 발생)
  E2: ServerDown (서버 다운)
  E3: DataLoss (데이터 손실)

Causal Relationships:
  E1 → E2: 15분 지연
  E2 → E3: 25분 지연

Initial: E1 occurs at minute 10
Question: When does E3 occur?
```
→ 정답: 50분 (10 + 15 + 25)

**특징:**
- **DAG 기반 생성**: 방향성 비순환 그래프로 인과관계 표현
- **최단 경로 알고리즘**: Dijkstra 알고리즘으로 정답 계산
- **유일해 보장**: 결정론적 그래프 구조로 유일해 자동 보장
- **난이도 분류**: 사건 수(4-12개)와 연결 밀도 기반 (Easy/Medium/Hard)
- **현실적 시나리오**: 기술, 비즈니스, 환경, 운영 등 4가지 도메인의 실제 사건
- **복합 추론**: 병렬 인과관계, 다중 경로, 시간 누적 계산 필요

## 주의사항

- `data/` 디렉터리는 `.gitignore`에 포함되어 있어 레포지토리에 업로드되지 않습니다
- 평가 결과는 로컬에만 저장됩니다
- 공용 레포지토리이므로 API 키나 민감한 정보를 커밋하지 마세요
